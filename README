Pour que le bras puisse bien tourner, l'avant-bras doit plier à plus de 90 degrés. Il doit plier de 240 degrés au lieu de 180 degrés.
Sinon, le bras en diagonale est plus long (sqrt(l1^2+l2^2)), si l1 == l2, diago == l1*sqrt(2)




2kg + 1kg (poids de la bouteille) à 3.25" (82.55 mm)
3 kg * 9.81N/kg * 0.08255 m
Je dois avoir 2.5 N*m de torque, ou 24.765 Kg*cm
Mes nema 17 sont de 0.46 N*m (ce qu'ils disent)
Le stepper avec gearbox est raté à 4.7N*m

PUT ALL LIBS IN A SINGLE FILE.
ADD #ifdef ARDUINO for things ARDUINO CANNOT DO.

Écrire un article et une librairie:
Ruby on rails goodies in c++
Avec ma librairie.

Un problème avec l'arduino souvent le serial contient Preparing... ready déjà
Au lieu du message ready pour savoir si l'arduino est prêt, faire un id
que arduino doit echo pour s'assurer qu'il est prêt à recevoir des commandes.

Des biscuits qui plaisent à toute la famille:
La même base à biscuit pour tous, mais chaque membre décide de ce qu'il veut mettre à l'intérieur de ses biscuits.

Calibrer avec une étiquette directement sur la tablette. Ou peu importe avec un pot normal,
et je connais le format du pot avec l'id...

Back Powering the Pi via the GPIO Header

It is possible to power the Pi by supplying 5V through the GPIO header pins 2,4 and GND. The acceptable input voltage range is 5V ±5%.

Raspberry Pi Model A+, B+, Raspberry Pi 2B and 3B have an 'ideal' reverse current blocking diode (ZVD) circuit on their 5V input. The 5V GPIO header pins connect to the 5V net after the micro-USB input, polyfuse and input 'ideal' diode made up of the PFET and matched PNP transistors. The ideal diode stops any appreciable current flowing back out of the 5V micro USB should the 5V net on the board be at a higher voltage than the 5V micro USB input.

If the add-on board uses any more GPIO connector pins than the first 26 and provides back-powering via the 5V GPIO header pins it is required to:

    Implement a duplicate power safety diode before the HAT 5V net (which then feeds power back through the 5V GPIO pins) as shown in this diagram. Alternatively provide some other mechanism to guarantee that it is safe if both the Pi PSU and add-on board PSU are connected. It is still recommended to add this circuitry for new board designs that only implement the first 26 pins of the GPIO header but that also implement back powering (see below note)
    Make sure that the supply that does the back-powering can supply 5V at 2.5A.

NOTE that the Raspberry Pi 3B+ and Pi Zero and ZeroW do not include an input ZVD. The micro-USB input on a Pi is expected to / almost universally is driven by a power source which does not sink current, i.e. it will not try to actively pull down a voltage higher than its regulated voltage. If a HAT back-powers a Pi and uses a power source that does not try to sink current (and will safely stop/pause regulation if its input voltage is higher than its regulation voltage) it is OK to not include a ZVD on a HAT. If you are unsure or don't know then please include the ZVD! The HAT designer is responsible for the safety of their product.

Under no circumstances should a power source be connected to the GPIO header 3.3V pins.

vimrc

filetype plugin indent on
" On pressing tab, insert 2 spaces
set expandtab
" show existing tab with 2 spaces width
set tabstop=2
set softtabstop=2
" when indenting with '>', use 2 spaces width
set shiftwidth=2
syntax on


Maybe one day do model.setAttr("name", value);
Advantage update only the ones modified (does it matter)
Update by column name and not by index.
But for now who cares.

Une tablette de petit pots: 100mm + 120mm + 50mm = 270mm
Une tablette de moyens pots: 170mm + 120mm + 50 mm = 340mm
Une tablette de grand pots: 250mm + 120mm + 50mm = 420mm
Donc la tablette de travail: 270mm + 340mm + 420mm = 1030mm

Différence entre moyens pots et grand pots: 250mm - 170mm = 80mm
Une pince avec offset de 80 mm?
Est-ce que ça va bloquer la caméra?

Ou prendre les pots par en dessous c'est ça que je voulais faire déjà?


Wait les moyens pots se sortent comme les petits pots ou comme les gros pots?
Juste 2 tablettes? 420mm + 270mm : 690mm OK

Mettre juste 2 tablette avec les moyens pots avec les petits pots.

Peut-être aussi des pots suspendus?

Pour la caméra:

https://borislavkostov.wordpress.com/articles/macro-photography-eng/focal-length-focusing-distance-working-distance/

PS3eye: http://www.zhopper.narod.ru/mobile/ov7720_ov7221_full.pdf

https://www.stemmer-imaging.com/en/technical-tips/choosing-a-lens-for-machine-vision/
There is a direct relationship between the sensor used in the camera and the most suitable lens. Parameters such as sensor size and pixel size are of major importance.

This limit is generally called the resolution limit and is usually expressed in line pairs per millimetre (lp/mm)

There are four types of image sensors: CCD sensors, CMOS sensors, microbolometers and Focal Plane Array (FPA) sensors.
https://en.wikipedia.org/wiki/Image_sensor

The two main types of electronic image sensors are the charge-coupled device (CCD) and the active-pixel sensor (CMOS sensor). Both CCD and CMOS sensors are based on metal–oxide–semiconductor (MOS) technology, with CCDs based on MOS capacitors and CMOS sensors based on MOSFET (MOS field-effect transistor) amplifiers.

Minimum object distance and close-up rings. Another term frequently indicated by optics manufacturers is the minimum object distance (MOD). It refers to the shortest working distance between the foremost lens and the motive which can still be focused using the focus ring on the lens.

In photography, the circle of confusion diameter limit ("CoC limit" or "CoC criterion") is often defined as the largest blur spot that will still be perceived by the human eye as a point, when viewed on a final image from a standard viewing distance.

https://en.wikipedia.org/wiki/Circle_of_confusion

CoC in mm = (viewing distance cm / 25 cm ) / (desired final-image resolution in lp/mm for a 25 cm viewing distance) / enlargement

Visual acuity. For most people, the closest comfortable viewing distance, termed the near distance for distinct vision (Ray 2000, 52), is approximately 25 cm. At this distance, a person with good vision can usually distinguish an image resolution of 5 line pairs per millimeter (lp/mm), equivalent to a CoC of 0.2 mm in the final image.

https://www.machinedesign.com/automation-iiot/sensors/article/21833530/lessons-in-machine-vision-eye-on-working-distance-and-depth-of-field

Focal Length indicates how strongly the lens bends light to form an image. Usually shown as f in equations, it is the distance from the rear principal plane of the lens to the focus point when imaging an object infinitely far away. A lens has two principal planes, front and rear, which are theoretical planes used by optical engineers during lens design and analysis. For thick and multi-element lenses, the principal planes are usually somewhere in the middle of the lens.

Primary Magnification is the ratio of image size to object size. Since most motion control applications involve objects that are much larger than the camera's image sensor, primary magnification (PMAG) is usually much smaller than unity. PMAG for a vision system is typically calculated as the horizontal sensor size divided by the horizontal field of view.

For example, what is often called “the lensmaker's equation” relates the focal length to the object and image distances:
1/f = 1/i + 1/o

magnification
m = i/o

Je veux:

https://en.wikipedia.org/wiki/Angle_of_view

Câble soit mini USB soit micro USB
https://www.instructables.com/Creating-you-own-USB-cables/

IMX219
4.60 mm
1/4” (18mm / 4 et aspect ratio 4:3) https://www.arducam.com/focal-length-calculator/
3296(H) × 2512(V) pixels
Donc: 3.69mm X 2.81mm
Unit cell size: 1.12 um

Arducam 8MP 1080P USB Camera Module, 1/4” CMOS IMX219 Mini UVC USB2.0 Webcam Board 
Field of View (FOV)：H=62.2°, V=48.8°

angle of view: on peut approximer:
a = d/f
a = 180*d/pi/f
where d represents the size of the film (or sensor) in the direction measured
donc f = 180*d/pi/a
f = 3.3mm ou 3.4 mm, donc 3.35mm // !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

Depth of field: 2*u^2*N*c/f^2
u = distance de l'objet = 120mm
N = f-stop (aperture) Je n'en trouve pas de données, mais posons 2
c = 0.2mm circle of confusion
f = 3.35mm
DOF = 1026 mm
Pour distance de l'objet = 50 mm
DOF = 178 mm

Un câble USB 12 pied.
Dans le fond ce que je veux c'est être capable de calculer à quel point l'image est flou. C'est ça le problème.
Donc je veux calculer: Le cercle de confusion pour la distance minimale de 120 mm et la distance maximale de 270mm.
Avec ou sans aperture?
Je veux calculer le diamètre de cercle de confusion limite (Coc limit)

Machine vision lens
Une lentille convexe.
CCD or CMOS sensor, does not matter I think
Mimimum focus distance ou MOD (minimum object distance): 120 mm ou moins idéalement, mais dois avoir avoir un angle plus tard sinon
Maximum focus distance: 270 mm ou plus, (mimimum focus distance (120 mm) + plus grand pot (250 mm) - plus petit pot (100 mm)
Horizontal field of view: 150 mm, un must, je dois voir la largeur du bras au moins, pour pouvoir voir proche des côtés.
Depth of field: 150mm, (maximum focus distance - minimum focus distance)

MIPI Camera Serial Interface 2 (MIPI CSI-2)

A widely adopted, simple, high-speed protocol primarily intended for point-to-point image and video transmission between cameras and host devices

Focus distance (u): 120 mm # (NB. inclut le focus length)
Working distance : u - f # distance de la lentille au sujet
Horizontal field of view: 150 mm
Aperture (N): F/16 # je veux un petit apperture pour avoir le plus grand DOF possible. Tradeoff par contre est l'image devient plus sombre. F/16 est plus petit que F/2
Depth of field: 2*u^2*N*c/f^2
Focal length (f): # Plus petit possible pour plus grand DOF possible. Relié angle of view. Quel est le tradeoff???
Angle of view (alpha): # Plus grand possible pour plus grand DOF possible. Relié focal length. Quel est le tradeoff???
circle of confusion: # ???
Lens size: # 1/4" ??? 1/2.33" ???
Minimum focus distance (MFD): 

https://www.edmundoptics.com/knowledge-center/application-notes/imaging/understanding-focal-length-and-field-of-view/

Note: Fixed Focal Length Lenses should not be confused with Fixed Focus Lenses. Fixed Focal Length Lenses have the ability to be focused for different distances; Fixed Focus Lenses are intended for use at a single, specific working distance. Examples of Fixed Focus Lenses are many Telecentric Lenses and Microscope Objectives.

Je dois avoir une field of view horizontal de 150 mm pour bien voir sur les côtés. (La largeur du bras est 6" = 150mm)

Les petits pots mesurent à peu près 100mm. Je dois avec une clearance de mettons 120 mm au dessus pour pouvoir déplacer les pots
par dessus les autres.

Les plus grand pots possible à mettre seront des grands pots 1 gallon, 6" de diamètre et 10" de haut. C'est 254mm de haut.

Il y a une différence de 150mm entre les petits pots et les grand pots.

While it may often be convenient to have a very wide angular field of view, there are some negatives to consider. First, the level of distortion that is associated with some short focal length lenses can greatly influence the actual AFOV and can cause variations in the angle with respect to Working Distance (WD) due to the varying magnitude of the distortion. Next, short focal length lenses generally struggle to obtain the highest level of performance when compared against longer focal length options (see Best Practice #3). Additionally, short focal length lenses can have difficulties covering medium to large sensor sizes which can limit their usability, as discussed in Sensor Relative Illumination, Roll Off and Vignetting.

mm: description
0: tablette
100: petit pot
220: détection petit pot
250: grand pot
370: détection grand pot
370: détection de tous les pots sur la surface de travail

Good c'est parfaitement ce que je fais présentement.

120 distance, 150 largeur de capture, 1/4":

https://www.arducam.com/focal-length-calculator/

The Horizontal Field of View is
64 degrees

The Focal Length needed for this sensor (3.6mm width) is
2.88 mm

120 distance, 150 largeur de capture, 1/2.3":

The Horizontal Field of View is
64 degrees

The Focal Length needed for this sensor (6.3mm width) is
5.04 mm

For a lens projecting a rectilinear image (focused at infinity, see derivation), the angle of view (α) can be calculated from the chosen dimension (d), and effective focal length (f) as follows:[4]

        α = 2 arctan ⁡ d 2 f {\displaystyle \alpha =2\arctan {\frac {d}{2f}}} \alpha =2\arctan {\frac {d}{2f}}

d {\displaystyle d} d represents the size of the film (or sensor) in the direction measured (see below: sensor effects). For example, for 35 mm film which is 36 mm wide and 24 mm high, d = 36 {\displaystyle d=36} d=36 mm would be used to obtain the horizontal angle of view and d = 24 {\displaystyle d=24} d=24 mm for the vertical angle. 

Donc pas besoin du point focal. Dans le fond j'ai seulement besoin de l'angle de détection???

Maintenant il me faut le depth of field par contre.

The depth of field can be determined by focal length, distance to subject, the acceptable circle of confusion size, and aperture.[2] The approximate depth of field can be given by:

    DOF ≈ 2 u 2 N c f 2 {\displaystyle {\text{DOF}}\approx {\frac {2u^{2}Nc}{f^{2}}}} {\displaystyle {\text{DOF}}\approx {\frac {2u^{2}Nc}{f^{2}}}}

for a given circle of confusion (c), focal length (f), f-number (N), and distance to subject (u).[3][4] 

https://en.wikipedia.org/wiki/Depth_of_field
Donc pour avoir le plus grand DOF, on veut le plus petit focal point.
Plus l'angle est grand, plus le point focal est petit.
Donc on veut le plus grand angle possible.

Quel est le focus distance par contre???

So focal length does not actually influence DoF if you adjust the camera-subject distance so that the magnification of your subject is the same.

f/.... c'est l'aperture size: https://photographylife.com/what-is-depth-of-field voir l'image dans la section apterure

Je veux un grand F (apterture) pour avoir un grand DOF (depth of field)

Camera-Subject Distance

Another important factor affecting depth of field is the distance between the camera and the subject. The shorter that distance, the smaller the depth of field.

La tablette du bas a les pots les plus haut et les plus gros. Il n'y a rien derrière pour les bloquer.
Mettre la boite eletrique au même niveau donc il ne peuvent pas tomber derrière.


The stack is complicated because there are many possible ways of a command.
It can be a simple function to execute.
It can be a function that has to wait for something (you don't want to freeze)
It can be a function that will call other functions at a later point.
It want to do something when the function is done.

At a very later point, you can set preferences of what kind of ingredients on which part of the shelves.

Ok, tu dois faire l'épicerie, qu'est-ce qui se passe? Tu prends toi même les pots en bas? Tu risque de les accrocher...

Je dois être capable de détecter les pots dans les tablettes du bas aussi. Parce que ça va être accrocher c'est sûr,
et une personne peut venir prendre un pot n'importe quand.

Une personne va foutre le bordel en prenant des pots en bas, mais c'est quand même un must. Prendre le pot de beurre de peanut rapidement
au petit déjeuner. Tu ne veux pas attendre après la machine qu'elle te l'apportes. Mais ça va être le bordel dans les pots...

Mais c'est mieux si c'est la machine qui range les pots. Tu arrives avec ta boite de pots, et tu ne les sors même pas de la boîte.
Il les prends de la boite et les rangent.

Si la porte du bas a été ouvert, le bras doit sweeper les tablettes du bas. Est-ce qu'il redéplace tout? Non, il doit être capable de prendre des pots dans peu d'espace.

Ah! Maybe simply rename all the Table to collections! It's ok to create a new collection everytime.

Pour chaque milestone, faire les features en premier, ensuite fixer les buger, ensuite faire les improvements.
Parce que faire des features peut faire changer la structure du code plus que le reste, ça doit
être la première chose à faire.

Priorité 1.0: Je dois avoir une très bonne raison avant de faire ce changement!

Instead of Table, simplement overloader les methods avec les arguments différents.
Déplacer le getTableName dans le model.
Vive les templates.
Global variable DB.
Objectif: Imiter rails.
https://stackoverflow.com/questions/4665117/c-virtual-function-return-type
is a vector<Model&> covariant with a vector<Jar&>?
class Model {
  virtual static string getTableName();
  static vector<Model> all() {
    DB.load()
  }
}
class Jar : public Model {
  static string getTableName() {return "jars";}
};
Si je veux du caching, implémenter MyCollection<T>, au lieu de vector<T>


Prendre le numéro de pot du DetectedHRCode et that's it.
Trouver le jar avec cette id là.
Pickup this jar.
Store this jar.

bon Colonne:

for colonne in colonnes:

  if (colonne.jar_format_id != jar.jar_format_id) {continue;}

  etagere = colonne.etagere
  nb_spots = shelf.depth / colonne.width;
  nb_spots = colonne.locations.size;
  if (nb_occupied < nb_spots) {
    location = createLocation();
  }
end

colonne = createColonne();    
location = createLocation();

Purée de courge à l'érable
Tofu général tao
Tofu magique selon Loonie

Les petits pots, comme les pots à épices sont soulevé par dessus les autres. Les gros pots, ah peut-être seulement sur
la tablette du bas! pour safety! sont différents

Là je m'occupe des petits pots soulever par le dessus n'importe où. Hypothèse, les petits pots ont tous la même grandeur à peu près dans une même tablette.
Ranger dans des colonnes de même largeur.

Exemple:

J'ai déjà:
- 4 petit plein qui forme une première colonne pleine
- 1 petit pot large dans une 2e colonne (peut avoir un 2e)
- 1 petit pot dans une 3e colonne

Je détecte:
- 2 petit pots
- 3 petit pot large

Prendre les pots détecter un par un (en commançant par le plus haut)
Voir s'il y a déjà des colonnes dans lequel il pourrait rentrer.
Sinon créer une nouvelle colonne et le ranger dedans.

Donc créer une modèle colonne.

Garder le modèle Location, mais il n'est pas généré au départ parce que tu ne sais pas quelle
grandeur de pot que tu vas insérer.

Utiliser le mot français colonne pour la table pour ne pas que ce soit confu avec columns in a database.

Ajouter colonne_id to locations??? Sure whatever de toute façon il n'y en aura jamais beaucoup.

Les coordonées polaires et les coordonées cartésiennes sont vraiment différentes.

Les coordonées polaire:
X: X0 est à la droite du point de vue de l'utilisateur. C'est le maximum que le bras peut se déplacer.
Y: Y0 est le plus bas que la machine peut se déplacer
T: Theta0 est le bras orienté vers la gauche du point de vue de l'utilisateur.

Les coordonnées cartésiennes:
X: X0 est à partir de la paroie gauche.
Y: Y0 est la tablette la plus basse.
Z: Z0 est à partir du devant.

// TO print all exceptions
    } catch(...) {
      std::exception_ptr p = std::current_exception();
      std::clog <<(p ? p.__cxa_exception_type()->name() : "null") << std::endl;
      response->write("Error an exception occured.");
    }

MODELS:

Ingredient: name, fdc_id

DIRECTORIES:

src/: Directly in src are executable source files
src/utils: Code with no dependencies
src/lib:   Code with dependencies (e.g. Dependency on std so arduino cannot use it)
src/core:  Code and models that are specific to my application
src/arduino: Arduino files
src/config/: Config files

BALAYAGE:

Le bras robotique balais le comptoir et balais les tablettes si les portes on été ouvertes afin
de déterminer la nouvelle position des pots.

Lorsqu'il détecte un pot, il demande la position du bras. Par la position du bras et la position du pot dans l'image
la position du pot est déterminée.

Il garde alors en mémoire les positions des pots détectés et une image par pot. Ce sont des HRCodePositionObject.

(Peut-être 2 images pour mieux déterminer la position.)

Ensuite, les codes sont analyser et devienne des HRCodeObject.

MODELS:

lib/hr_code => HRCode(croppedImage,x,y,scale)
core/sweep => DetectedHRCode(HRCode, toolPosition, angle)
core/jar_position_analyzer => PositionedHRCode(HRCode, jarPosition) => writes unique jar images to disk
core/jar_parser => JarLabel(position, number, weight, contentName, contentId)

----

DESIGN:

Je veux pouvoir rajouter des extensions sur les côtés. Alors au lieu de faire des cables fixes sur des roulettes,
faire un genre d'assenseur, et quand la machine est en haut ou en bas, la machine peut se déplacer gauche droite
et sortir de son extension pour aller dans un autre.


----

UTOPIE:

Avec la machine, idéalement plus besoin de frigo. La nourriture est fait pour la quantité que tu manges. Tous les ingrédients sont sec et déshydratées.
Le problème peut-être est que fais tu des restants de nourriture qui ne se conserve pas? Il ne devrait pas y en avoir. Et pour combler la faim, tu
manges du dessert. Le dessert peut rester à température pièce sans problème.

----

Ca serait pas pire je crois si les templates en c++ tu remplacerait le type de base. Ca veut dire que tu peux implementer un type qui conviendrait pour la fonction.
Et tu overwrite le type qui existe deja. Tu pourrais ainsi patcher pas mal les fonctions. Idée farfelu de même.

----

Charge maximale: 2 kg (un grand pot rempli d'eau)

Vitesse: 1 ft/sec == 30 cm/s

Le voyagement est de 4 ft. Donc 48 po.

Pour un enrouleur de 1 po de diamètre. Ça fais 3 po par tour.
48/3 = 16 tour donc un po de long pour l'enrouleur. (Câble d'acier 1/16) plus un petit peu de safety et pour commencer au moins 3-5 tours toujours.

3 po par tour, donc il faut 4 tour minutes.

Mon moteur doit être capable de au moins soulever 10 lb, gros minimum. Ça serait bien 20 lb.

Mon moteur a un angle de 1.8 degree, donc 200 step. A 1000 rpm comme vitesse moyenne en general pour un stepper, ca fais 200 000 step par minutes. Soit 3333 step par seconde. Donc 3.33 step par millisecond, donc 1 step à tous les 300 microsecondes.

1000 rpm, c'est 16.67 rotations par secondes...

Ah c'est le TB6600 qui fuck les affaires en rajoutant des microsteps!!!

https://www.thingiverse.com/thing:321077/comments

Motor wiring:
https://www.orientalmotor.com/stepper-motors/technology/unipolar-bipolar-connections.html

Cable drums.

Un tour de plus pour que le cable reste en tension.

A typical drum has a 4" diameter which means that each full wind (4 quarter turns) will give about 12.5 inches of lift height. Usually about 1 extra wind is added so the cable stays in tension. You should end up using about 7.5 to 8 turns for a 7' door and about 1 additional turn for an 8' door.

Mon déplacement est de 60" - à peu près 10" (la hauteur de roue à roue). Donc 50" de déplacement.

Mon diamètre de drum est de 1.25" - 1/16" = 1.1875"
1.1875" * PI = 3.73"

50" / 3.73" = 13.4

Un tour de plus est rajouter pour maintenir de la tension.

Donc 14.5 tour.

Pour l'instant, le poids est de 2.5 kg. Il reste risque d'être de 4-5 kg sans charge.

Après un angle de 360 degrés * 14.5 = 5220 degrés, il doit exercé pouvoir soulever une charge de 4 kg.

Une force de 4 kg (8.82 lbs) est appliqué sur le drum à 0.59375" (rayon du drum). Donc un moment de 5.24 lb*po doit être engendré par le ressort après 5220 degrés (91.1 radians).

Mon drum est de 

Double torsion springs can be used when twice the force is required or when you need an even distribution of torque

Torsion springs should be deflected in the direction that closes the coils

Aimants avec ce que l'ingrédient est dessus mes pots.

https://addison-electronique.com/produits/filage/fils-et-accessoires/terminaux-borniers-et-connecteurs/

Acheter bande d'acier (strapping).
Acheter tôle.
Acheter marettes plus petites.
Acheter #8-32 X 0.75"
Acheter #10-24
Acheter petite quicaillerie, ecrous #6-32
Acheter tige filetee 0.25"
Acheter melamine
Acheter caoutchouc établi
Acheter split pin
Ca pourrait comme être des sapin de plastique comme pour les tiroirs pour séparer les pots dans des rangées.
Nut de nylon pour pince haut bas?
Acheter circlip?
Acheter acier 1/4" pour fabriquer coupling male
Acheter standoff pour electronique
Acheter Tube carré 1/2.

TODO: Un test de résistance du truc pour tenir les cables.
Spécifier la charge maximale.

https://medium.com/@machadogj/arduino-and-node-js-via-serial-port-bcf9691fab6a

Un cable drum avec un centre hexagonal pour pouvoir etre entrainer pour tourner tout en pouvant se deplacer, comme ca ca suivrait le cable en meme temps.

La machine serait toujours genre 40" de large, mais tu peux mettre une extension à côté. Ça peut être une extension qui stock seulement des pots (un grand caroussel) ou bien une extension avec un four, ou une extension avec un frigo, ou une extension avec un congélateur, etc... Ils se passent les pots par une porte de côté.

Le matin, le robot pourrait aller chercher tout les pots de déjeuder et les mettre à porté de main pour le monde!

Pour les steppers les fils, je ne comprends pas pourquoi il est si gros le controlleur. Il devrait etre petit et etre directement sur le moteur ou a cote. Il devrait se rendre moins de fil.

2 fils:
0,0 -> STATE 1
0,1 -> STATE 2
1,0 -> STATE 3
1,1 -> STATE 4

POWER et GROUND sont partages pour tous.

Ça serait vraiment malade si le robot était capable d'écrire ses propres étiquettes, quand tu as un nouveau pot et tu veux mettre un nouvel ingrédients, tu mets le pot vide. Il va le peser, inscrire le poids dessus, te demander ce que tu veux mettre dedans, inscrire le code et le nom. Ça serait malade!!!!!

J'aimerais que ma machine possède un outil probe pour les distances. Elle pourrait ainsi déterminé ses propres limites.

C'est mieux des steppers pour les axes de positionnement parce que ça garde la position. (Pas besoin de freins)

Tu peux seulement avoir un certain angle quand tu es à droite ou à gauche? Ça serait plus simple?


<!-- SECTION *Design -->
<div id="design">
<pre>
Section transversale debout ou couchée:

Je dois avec de l'espace derrière pour que ça monte et descende, donc debout c'est mieux pour ça?

Aussi je dois avoir de l'espace pour le moteur et tout.

La hauteur du meuble est de 79" pour pouvoir se déménager facilement (une porte standard mesure 80"). Une section du haut pour la machine est vissée par dessus, et toute la machine s'enlève simplement en la soulevant en haut (Ça pourrait être par en bas aussi).

Pour l'instant, je fais une seule rotation parce que j'ai aussi mon déplacement gauche droite. Peut-être par contre que je vais aussi rajouter une 2e rotation (comme pour un robot SCARA). Pour avoir plus de mobilité. Aussi, ce qui pourrait être cool, c'est d'avoir un 2e bras. Donc 2 bras avec 2 rotations chacune comme ça ils peuvent se déplacer chacun indépendemment l'un de l'autre. C'est donc le torse qui se déplacerait gauche droite pour des armoire larges. Ce déplacement ne serait donc peut-être pas nécessaire pour une petite armoire (le torse toujours au milieu)

Je ne suis pas sûr de faire ça parce que là ça devient vraiment compliqué. Il faut que je rajoute tous les moments doublés. Par exemple, je ne peux plus utiliser un seul monter descendre. Il en faut un pour chaque bras. Pas sûr finalment...

C'est mieux si c'est le bras qui monte et descends et non seulement la tablette mobile pour plusieurs raisons. Premièrement, le bras doit pouvoir monter et descendre pour prendre des pots. Aussi, ça voudrait dire qu'il pourrait utiliser la tablette mobile comme surface de travail.

Il va y avoir une camera sur le robot pour determiner la position des pots. Il va pouvoir trouver la position en x et z. Aussi, il va pouvoir determiner la hauteur des pots. Ainsi, le bras va se positionner au dessus en x et z. Ensuite il va descendre dessus.

Il va y avoir un gros ressort au bout pour donner une marche de manoeuvre sur la hauteur.

Avec la camera sur mon robot, peut-etre que le raspeberry pi devrait etre sur l'ordinateur.

Il n'y a pas le choix, il y a de l'impreicision dans mon systeme. Il y a plusieurs solutions possibles. Des encodeurs pour s'assurer que je ne manque pas de step. Des capteur de force pour arreter a temps, mais je crois que le plus simple et le moins dispendieux serait de simplement donner du lousse a tous les axes avec des ressorts. Je crois que je n'ai pas besoin de haute precision et c'est plus safe ainsi au lieu d'un bras rigide. Ca me prendrait une genre de clutch a ressort sur les gears. Ou peut-etre bien avec une bille et un ressort, ca serait un limiteur de couple. Ca serait rigide sauf si c'est un trop gros contant, et idealement je detecte si le contact n'est plus la donc je sais qu'il a assez force.
</pre>
</div>

<!-- SECTION *Notes -->
<div id="Notes">

<h1>Notes</h1>

NOTE de design:

Mettre mon site de machine beau.

Oui ça serait cool un bras robotique, mais je mets de côté pour l'instant. Tellement de monde ont essayer d'en faire, je n'arriverai jamais à faire mieux pour moins cher. C'est plus cool, mais aussi c'est moins efficace. Parce qu'il n'y a pas de support, c'est beaucoup plus difficile pour les moteurs. Des mouvements linéaires sont beaucoup plus efficaces parce que le déplacement se fait sur des roues.

Toutefois, ce n'est pas en vaint, j'ai une bonne idée je crois. Le potentiel est dans des trucs imbriqués (comme des poupées russes!) C'est beaucoup plus éléguant qu'une structure pleine avec un petit déplacement.
</div>

Speach de vente: Je vais vous compter une histoire. Dire quelque chose de dramatique. Et là c'est là que j'ai su que je devais fabriquer ma machine. Un allier dans la salle dit: Est-ce que c'est vrai cette histoire: Moi de rétortorquer, non, mais ça aurait pu l'être. hahahaha

Fuck l'obscellescence programmé. Fuck les machines à pain qui ne dure pas.

.vimrc

filetype plugin indent on
" On pressing tab, insert 2 spaces
set expandtab
" show existing tab with 2 spaces width
set tabstop=2
set softtabstop=2
" when indenting with '>', use 2 spaces width
set shiftwidth=2


Jig pour plier l'acier:
Faire comme ma petite sandwich plieuse de rebord, mais en super long. Mais bon cela ça serait plus tard?

La jig que ça prendrait c'est avec deux rouleaux peut-être, un creux v et un boss v.

Je tiens à ce que la boite électronique soit à part du robot. C'est le plus clean. Soit une boite en dessous. Sois une boite au dessus.
La seule chose chiante est le câble USB pour la caméra... Il faut que je convertisse USB en ethernet probablement.


Si le cable tray en avant pose, problème, simplement faire un 180 à la machine pour qu'il se retrouve à l'arrière.

Aye, peux être faire un petit rack sur le côté que Heda va se déposer dedans quand il a terminé son boulot. Ça serait ça son home.
Il y aurait simplement besoin de un seul capteur pour valider que Heda est dans son home. Mécaniquement, il saurait précisemment où
il se situe par rapport à ses axes (un tapper pour guider). Si jamais il manque d'électricité, l'utilisateur devra prendre le bras
manuellement et l'emporter justqu'à sa maison.
Avantages: Moins de limit switch (moins de câble électrique), référencement de l'axe thêta aussi. Safe de ne pas faire de référencement n'importe où et briser quoi que ce soit.
Inconvénients: Moins grande précision probablement parce que ne prends pas en compte le backlash.


Idéalement, pour installer le robot, prendre une armoire existante (ou une acheter par le client), défaire
la paroie du fond, installer mes côtés, installer la machine et réinstaller la paroi du fond après ma machine.


Une pince comme un peigne pour soulever les pots lourds.

DCMotor avec un encodeur pour l'axe vertical. Comme ça je vais pouvoir à côté les pots sur les tablettes?

Use interupts to read rotary encoder.
https://playground.arduino.cc/Main/RotaryEncoders/

Upload with a single command to the arduino the new code with the arduino-cli:
https://blog.arduino.cc/2018/08/24/announcing-the-arduino-command-line-interface-cli/
https://arduino.github.io/arduino-cli/getting-started/

Déterminer l'angle de détection requise.

Raspberry pi camera module V2 35$.

62.2 degrees
48.8 degrees

Focal length: 3.04 mm

However, Raspberry Pi recommends using a 2A Power Supply, so you'll need to double-check that before installing this module

https://www.arducam.com/product-category/spi-camera-for-arduino/

I want a deep depth of field.

Depth of field is determined by the relationship of the aperture (f-stop) and focal length of your lens, the distance of the subject in the photo, and the size (format) of the sensor.

https://www.digitaltrends.com/photography/what-is-depth-of-field/

The most common way to change your depth of field is by adjusting the aperture of your lens, which determines how much light your lens allows through it and on to your camera sensor. The narrower the aperture is, the deeper the depth of field. A wide open aperture creates nicely soft backgrounds with a shallow depth of field. Here, the depth of field is sometimes so narrow that your subject’s eye could be in focus but the tips of the eyelashes may be soft. These wide apertures (like f/1.4 or f/2) draw more attention to the subject by blurring out the background, but larger or close-up subjects may not be entirely in focus.

I want a narrow aperture (f-stop) (such as f/11 or f/16),

You may have noticed that smartphones often have bright lenses with seemingly wide apertures, like f/1.8 on the iPhone 11 Pro — and yet, the depth of field is still very long. Why? This is because sensor size also plays a role in the depth of field. The technical explanation behind this is a bit, well, technical, but the takeaway is this: The larger the sensor, the easier it is to get those nice soft backgrounds. But a large sensor requires a much bigger lens, which simply wouldn’t fit in in a phone.

The lens, which is the most important part has a focal length range of 4.5mm – 18mm. This is the equivalent of 25mm– 100mm. It is a great tool for macro photography, as the macro mode lets you focus from 1cm to infinity.

I want a big depth of field, always clear image from 2cm to 50cm.

What affects depth of field?
Depth of field depends on aperture, focus distance, focal length and circle of confusion (CoC). The latter depends on camera sensor size, final image print size, image viewing distance and viewer's visual acuity.

Produce more DoF: small apertures (f/8-f/22), short focal lengths (10-35mm), longer focus distances, smaller camera sensors (crop).

What’s the hyperfocal distance?
When focusing at the hyperfocal distance, everything falling from half of this distance to infinity will be in focus. It depends on aperture, focal length and circle of confusion. It does not depend on focus distance (subject distance).


J'essaie avec https://github.com/jacksonliam/mjpg-streamer.git
mjpg-streamer
